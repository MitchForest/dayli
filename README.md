# dayli

**Stop managing your work. Start doing it.**

## The Truth Nobody Talks About

You don't have a productivity problem. You have a decision fatigue problem.

Every morning, you open your laptop to 15 tabs, 200 emails, and 30 tasks. You spend the first hour "planning your day" - which is really just anxiety-driven task shuffling. By the time you actually start working, your best mental energy is gone.

**The real tragedy?** You know exactly what important work needs doing. But it's buried under a mountain of maybe-important, might-be-urgent, should-probably-check noise.

## What dayli Actually Does

dayli is an AI executive assistant that makes every decision about what you should work on, so you don't have to.

Open dayli and see your day already planned:
- Your 3-7 most important tasks scheduled in time blocks
- Emails analyzed by importance AND urgency
- Focus time protected in your calendar
- Everything orchestrated by AI that learns your patterns

No task lists. No priorities. No badges. Just a clean schedule and a chat interface.

## Who Is This For?

dayli is for knowledge workers who:
- Know the 80/20 principle but struggle to apply it daily
- Want to process emails and meetings efficiently to create time for deep work
- Are tired of productivity theater and want real focus
- Need things to not fall through the cracks
- Value their time and attention above all else

## Real User Stories (How We Actually Help)

### Story 1: "The Morning Paralysis"
**Alex, 28, Senior Software Engineer**

*The Pain:* "I'd open my laptop at 9am and see 47 unread emails, 3 Slack channels on fire, and my task list from yesterday. I'd spend 45 minutes 'organizing' - really just moving anxiety around. By the time I started coding, it was almost 10am and I was already mentally exhausted."

*How dayli Solves It:*
```
Alex at 9am: "Plan my day"

dayli: "I've analyzed your 47 emails. 3 need responses this morning (scheduled 11-11:30am), 
12 are FYIs (archived), and the rest can wait. Your critical API refactor has a 2-hour 
deep work block starting now. Your calendar is blocked, Slack is paused. Just start coding."

Result: Alex starts actual work at 9:02am with zero decisions made.
```

**The Feature Magic:**
- **Adaptive Scheduling**: AI already made all the decisions
- **Email Triage**: 47 emails â†’ 3 actions
- **Protected Focus**: Calendar auto-blocked, no interruptions

### Story 2: "The Context Switching Nightmare"
**Sarah, 34, Product Manager**

*The Pain:* "Every 15 minutes something 'urgent' would pop up. A Slack from engineering, a customer email, a meeting invite. I'd handle each one immediately because I didn't want to drop balls. By 5pm, I'd realize I never worked on the strategy doc that actually mattered."

*How dayli Solves It:*
```
10:30am interrupt: "Sarah, the CEO wants to meet about pricing at 2pm"

dayli: "I see the meeting request. You're currently in deep work on the Q4 strategy 
(1 hour left). I'll accept the meeting but I'm moving your email block to 3:30pm 
and pushing non-urgent items to tomorrow. Keep focusing - I've handled it."

Sarah stays in flow. dayli handles the Tetris.
```

**The Feature Magic:**
- **Intelligent Interruption Handling**: AI decides what's truly urgent
- **Automatic Rescheduling**: Adjusts the day without breaking focus
- **Context Preservation**: Protects current deep work above all

### Story 3: "The Invisible Workload"
**Jordan, 31, Marketing Director**

*The Pain:* "My calendar showed 4 hours of meetings, but I had 6 hours of work. Email responses, campaign reviews, team feedback - all invisible labor that happened in the cracks. I'd work until 8pm daily because I couldn't see the real workload."

*How dayli Solves It:*
```
Jordan: "I feel like I'm drowning but my calendar looks fine"

dayli: "You have 73 unscheduled tasks from emails and Slack. Based on your patterns:
- Campaign review: 45 min (scheduling at 9am)
- 12 quick email replies: 30 min batch (2pm)  
- Team feedback docs: 1 hour (4pm)

I've made all your invisible work visible and scheduled. Your day ends at 5:30pm."
```

**The Feature Magic:**
- **Task Extraction**: Pulls tasks from emails/messages automatically
- **Time Estimation**: Learns how long things actually take you
- **Visible Scheduling**: Nothing happens outside of time blocks

### Story 4: "The Energy Mismatch"
**Maya, 29, Data Scientist**

*The Pain:* "I'd schedule deep analysis for 3pm when my brain was mush, then waste my sharp morning energy on email. I knew my patterns but kept fighting them. By Friday, I'd have accomplished half of what I intended."

*How dayli Solves It:*
```
Maya: "Schedule my model training work"

dayli: "I notice you complete complex work 3x faster before noon. I've scheduled:
- 9-11am: Model training (your peak focus time)
- 11-11:30am: Email batch (lower energy needed)
- 2-3pm: Data cleaning (repetitive, good for afternoon)

This matches your actual energy patterns from the last 30 days."
```

**The Feature Magic:**
- **RAG Learning System**: Tracks when you're actually productive
- **Energy-Aware Scheduling**: Matches work type to energy level
- **Pattern Recognition**: Learns without surveys or manual input

## The dayli Difference

1. **We hide more than we show** - Yesterday's tasks? Gone. Next week? Doesn't exist.
2. **AI has authority** - It decides, you execute (or override when needed)
3. **Constraints drive productivity** - 3-7 tasks isn't a limitation, it's a feature
4. **Natural language is the only interface** - If you need a button, we've failed
5. **Learning without dashboards** - The AI gets smarter, you stay focused

## The Actual UI: Radical Simplicity

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“… Today's Schedule            â”‚  ğŸ’¬ AI Assistant     â”‚
â”‚                                 â”‚                      â”‚
â”‚  9:00 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  "Plan my day"       â”‚
â”‚       â”‚ Deep Work Block â”‚      â”‚                      â”‚
â”‚       â”‚ Payment Refactorâ”‚      â”‚  "I'll analyze your  â”‚
â”‚       â”‚ âœ“ Task 1       â”‚      â”‚  calendar and emails,â”‚
â”‚       â”‚ â—‹ Task 2       â”‚      â”‚  then create an      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  optimal schedule."  â”‚
â”‚                                 â”‚                      â”‚
â”‚ 11:00 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  [AI is thinking...] â”‚
â”‚       â”‚ Email Block     â”‚      â”‚                      â”‚
â”‚       â”‚ 12 to process   â”‚      â”‚  "Done! I've         â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  scheduled 3 focus   â”‚
â”‚                                 â”‚  blocks and batched  â”‚
â”‚ 12:00 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  your emails for     â”‚
â”‚       â”‚ Lunch Break     â”‚      â”‚  11am."              â”‚
â”‚       â”‚ Protected       â”‚      â”‚                      â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Two panels. That's it. Schedule on the left, AI chat on the right.

## Core Features (What We Actually Built)

### ğŸ§  AI-Powered Natural Language Control
Everything happens through chat. No buttons, no menus.
- **"Plan my day"** â†’ AI analyzes everything and creates optimal schedule
- **"Move my meeting to 3pm"** â†’ Done, calendar updated
- **"Process my emails"** â†’ Triaged by importance/urgency, scheduled
- **"What should I work on?"** â†’ Context-aware suggestion based on time/energy

### ğŸ“… Adaptive Scheduling Workflow
Powered by LangGraph, the scheduling system adapts to your current state:
- **Empty schedule?** Full daily planning with optimal distribution
- **Partially filled?** Intelligent gap-filling  
- **Overbooked?** Smart optimization and task deferral
- **Always protected:** Lunch breaks at your preferred time

### ğŸ“§ Two-Dimensional Email Triage
Our email workflow analyzes on two axes:

|                | **Urgent** | **Can Wait** | **No Response** |
|----------------|------------|--------------|-----------------|
| **Important**  | Today block | Tomorrow | Archive |
| **Not Important** | Quick batch | Defer | Archive |
| **Archive** | - | - | Auto-archive |

Result: 80% of emails handled without you seeing them.

### ğŸ§  Multi-Layer RAG Learning System
Every decision is stored and learned from:
- **Pattern Layer**: Long-term behaviors ("always takes lunch at 11:30")
- **Recent Layer**: Last 7 days of decisions
- **Similar Layer**: Past situations with similar context

The AI gets smarter without showing complexity.

### ğŸ”’ Protected Focus Time
When you're in a focus block:
- Google Calendar shows "Deep Work - Busy"
- Meeting invites during this time auto-declined
- Only true emergencies surface

## The Technical Architecture (How We Built This)

### AI Implementation: A Multi-Layer Intelligence System

Our AI architecture represents a sophisticated orchestration of multiple technologies working in harmony. The system combines intelligent routing, atomic tools, complex workflows, and continuous learning through RAG to deliver an AI executive assistant that truly understands and adapts to each user's unique working style.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        User Input                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Orchestration Layer                         â”‚
â”‚  â€¢ Intent Classification (GPT-4)                             â”‚
â”‚  â€¢ RAG Context Injection                                     â”‚
â”‚  â€¢ Confidence Scoring                                        â”‚
â”‚  â€¢ Route Determination                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                         â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI SDK Tools â”‚       â”‚   LangGraph   â”‚   â”‚    Direct     â”‚
â”‚   (Atomic)    â”‚       â”‚  (Workflows)  â”‚   â”‚  Response     â”‚
â”‚               â”‚       â”‚               â”‚   â”‚               â”‚
â”‚  25 Tools     â”‚       â”‚  4 Workflows  â”‚   â”‚ Conversation  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Pure Data Response                           â”‚
â”‚  â€¢ Domain-specific data (blocks, tasks, emails)             â”‚
â”‚  â€¢ Success/error status                                      â”‚
â”‚  â€¢ No UI instructions                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Client-Side Rendering                           â”‚
â”‚  â€¢ ToolResultRenderer detects type                          â”‚
â”‚  â€¢ Loads appropriate display component                       â”‚
â”‚  â€¢ Interactive UI without AI formatting                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### The Orchestration Layer: Intelligent Routing

The orchestration layer is the brain of our system, using GPT-4 to understand user intent and route requests appropriately:

```typescript
interface UserIntent {
  category: 'workflow' | 'tool' | 'conversation';
  confidence: number; // 0-1 score
  subcategory?: string;
  entities: {
    dates?: string[];
    times?: string[];
    people?: string[];
    tasks?: string[];
    emails?: string[];
  };
  suggestedHandler: {
    type: 'workflow' | 'tool' | 'direct';
    name?: string;
    params?: Record<string, any>;
  };
  reasoning: string;
}
```

**Routing Logic:**
1. **High Complexity â†’ Workflows** (confidence > 0.8)
   - Multi-step operations like "Organize my entire day"
   - Cross-domain requests requiring coordination
   - Strategic planning and optimization
   
2. **Specific Actions â†’ Tools** (confidence > 0.7)
   - Single operations like "Move my 2pm meeting to 4pm"
   - Clear parameters and direct modifications
   
3. **Ambiguous/Conversational â†’ Direct Response** (confidence < 0.7)
   - Questions, clarifications, general assistance
   - "How should I prioritize my day?"

### The Tool System: 25 Essential Operations

All tools use the tool factory pattern and return pure domain data without UI instructions:

```typescript
// Example tool implementation with pure data return
export const createTimeBlock = registerTool(
  createTool<typeof parameters, CreateTimeBlockResponse>({
    name: 'schedule_createTimeBlock',
    description: "Create a new time block in the schedule",
    parameters: z.object({
      type: z.enum(['focus', 'email', 'meeting', 'break']),
      title: z.string(),
      startTime: z.string(),
      duration: z.number()
    }),
    metadata: {
      category: 'schedule',
      displayName: 'Create Time Block',
      requiresConfirmation: false,
    },
    execute: async (params) => {
      const block = await scheduleService.create(params);
      // Return only domain data
      return {
        success: true,
        block: block,
        conflicts: checkConflicts(block)
      };
    }
  })
);
```

**Tool Categories:**
- **Schedule Tools (5)**: viewSchedule, createTimeBlock, moveTimeBlock, deleteTimeBlock, fillWorkBlock
- **Task Tools (4)**: createTask, updateTask, completeTask, viewTasks
- **Email Tools (3)**: viewEmails, readEmail, processEmail
- **Calendar Tools (2)**: scheduleMeeting, rescheduleMeeting
- **Preference Tool (1)**: updatePreferences
- **Workflow Tools (4)**: optimizeSchedule, triageEmails, prioritizeTasks, optimizeCalendar
- **System Tools (6)**: confirmProposal, showWorkflowHistory, resumeWorkflow, provideFeedback, showPatterns, clearContext

### LangGraph Workflows: Complex Multi-Step Operations

Workflows use LangGraph for sophisticated state management and decision trees:

#### Adaptive Scheduling Workflow
```typescript
interface SchedulingState {
  userId: string;
  date: string;
  currentSchedule: TimeBlock[];
  tasks: TaskWithScore[];
  emails: EmailWithUrgency[];
  preferences: UserPreferences;
  analysis: ScheduleAnalysis;
  strategy: 'full' | 'optimize' | 'partial' | 'minimal';
  proposedChanges: ScheduleChange[];
}

// Workflow intelligently routes based on schedule state
workflow.addConditionalEdges(
  "determineStrategy",
  (state) => state.strategy,
  {
    full: "fullPlanningNode",      // Empty schedule
    optimize: "optimizationNode",   // Inefficient schedule
    partial: "partialFillNode",     // Some gaps
    minimal: "minimalAdjustNode"    // Nearly full
  }
);
```

**Key Innovations:**
- **Smart Strategy Selection**: Analyzes schedule density and inefficiencies
- **RAG Enhancement**: Every decision informed by user patterns
- **Atomic Changes**: All modifications as discrete, revertable operations

### 2. Email Management Workflow
Two-dimensional analysis (importance Ã— urgency) with intelligent batching:

```typescript
// The 2D analysis matrix
const actionMatrix = {
  'important_urgent': 'morning_focus',
  'important_can_wait': 'afternoon_block',
  'important_no_response': 'archive',
  'not_important_urgent': 'quick_batch',
  'not_important_can_wait': 'tomorrow',
  'archive_*': 'auto_archive'
};

// Smart batching creates time-boxed blocks
emailBatches: [
  { type: 'morning_focus', emails: [...], totalTime: 45, slot: '9:00 AM' },
  { type: 'quick_batch', emails: [...], totalTime: 15, slot: '2:00 PM' }
]
```

### 3. Task Intelligence Workflow
Context-aware task scoring with multiple factors:

```typescript
// Sophisticated scoring algorithm
score = basePriority + ageFactor + energyMatch + timeOptimization + ragBoost + deadlineUrgency;

// Produces ranked tasks with reasoning
{
  task: "API Refactor",
  score: 85,
  reasoning: "High priority + morning energy match + similar past success",
  confidence: 0.92
}
```

### 4. Calendar Optimization Workflow
Intelligent conflict resolution and meeting consolidation:

```typescript
// Detects various meeting inefficiencies
- Overlapping meetings with severity scoring
- Back-to-back without breaks
- Meeting clustering opportunities
- Low-value recurring meetings

// Generates smart resolutions based on:
- Meeting importance scores
- Attendee flexibility
- User's preferred meeting times (from RAG)
```

### The RAG Learning System in Detail

Our RAG system continuously learns and adapts:

```typescript
// Three-layer context retrieval
const context = await ragService.getContext(userId, query, {
  includePatterns: true,    // "User prefers lunch at 11:30"
  includeRecent: true,      // Last 7 days of decisions
  includeSimilar: true      // Vector similarity search
});

// Learning from rejections
When user rejects: "Schedule meeting at 8am"
System learns: "No meetings before 9am"
Future behavior: All meeting suggestions start at 9am+
```

### Workflow Persistence & Resumability

Every workflow can be interrupted and resumed:

```typescript
// Workflows save state after each node
// Can resume from any point within 24 hours
// Failed workflows can be retried with modified parameters
```

### Pure Data Architecture: Clean Separation of Concerns

Tools return pure domain data without UI formatting instructions:

```typescript
// Tool returns only data
interface ScheduleViewResponse extends BaseToolResponse {
  success: boolean;
  date: string;
  blocks: TimeBlock[];
  stats: ScheduleStats;
  // No UI instructions - just data
}

// Client renders based on tool type
<ToolResultRenderer 
  toolName="schedule_viewSchedule"
  result={scheduleData}
  onAction={handleAction}
/>
```

**Benefits:**
- **Simpler Tools**: Focus on business logic, not UI
- **Predictable Rendering**: UI decisions made client-side
- **Better Performance**: No AI formatting overhead
- **Type Safety**: Clear data contracts for each tool
- **Easier Testing**: Pure functions with predictable outputs

### System Intelligence Features

**Adaptive Behaviors:**
- **Time-of-Day Intelligence**: Morning for complex tasks, afternoon for collaboration
- **Energy Management**: Tracks peak performance, suggests breaks, balances task types
- **Context Switching Minimization**: Groups similar tasks, batches emails

**Personalization Engine:**
- **Explicit Feedback**: User confirmations/rejections
- **Implicit Signals**: Task completion times, email patterns
- **Pattern Recognition**: Recurring behaviors and preferences
- **Outcome Tracking**: Success rates of suggestions

**Continuous Improvement:**
- A/B testing internal strategies
- Weekly pattern analysis
- Monthly preference updates
- Cross-user learning (privacy-preserved)

### Production Architecture

**Performance Characteristics:**
- Tool Execution: < 2 seconds (p95)
- Workflow Completion: < 5 seconds (p95)
- Intent Classification: < 300ms
- RAG Context Retrieval: < 500ms
- UI Update Latency: < 100ms

**Scalability & Reliability:**
- Stateless tools for horizontal scaling
- Redis-backed workflow persistence
- Vector DB with caching for embeddings
- Automatic retries with exponential backoff
- Circuit breakers prevent cascade failures
- Graceful degradation to simpler operations

### How It All Works Together

1. **User Input** â†’ "Plan my day with focus on deep work"
2. **Orchestration Layer** â†’ Classifies intent, injects RAG context
3. **Routing Decision** â†’ High complexity â†’ Adaptive Scheduling Workflow
4. **Workflow Execution** â†’ 5 nodes process state with conditional routing
5. **RAG Enhancement** â†’ "User prefers morning deep work" influences decisions
6. **Response Generation** â†’ Pure data response â†’ Client-side rendering
7. **Learning** â†’ Stores decisions for future personalization

For complete technical details on all workflows, see the [AI System Reference](.pm/epics/epic-4/AI-SYSTEM-REFERENCE.md).

## Design Decisions That Matter

### No Manual Controls
- **No settings page** â†’ AI learns your preferences
- **No task creation** â†’ Tasks come from email/calendar/chat
- **No priority levels** â†’ AI decides based on context
- **No drag-and-drop** â†’ Natural language only

### Time as Primary Dimension
```typescript
interface TimeBlock {
  startTime: Date;
  endTime: Date;
  type: 'focus' | 'email' | 'meeting' | 'break';
  tasks: Task[];  // What to do in this block
}
```
Everything has a "when", not just a "what".

### Enforced Constraints
- **3-7 tasks max** per day (hard limit in code)
- **Today-only view** (no week/month views)
- **Single task visible** during focus
- **Protected lunch** (always scheduled)

### AI as Invisible Intelligence
The AI should feel like a brilliant assistant, not a chatbot:
- Never mentions tool names or technical details
- Explains actions in human terms
- Learns without showing learning
- Adapts without configuration

### Trust Through Transparency
- AI explains its reasoning when asked
- Changes preview before applying
- Undo is always available
- You can ask "why did you do that?"

## Architecture Decisions Worth Noting

### Service Factory Pattern
We built a data-source agnostic architecture that allows seamless switching between mock and real data:

```typescript
const factory = ServiceFactory.getInstance();
factory.configure({ userId, supabaseClient }, useMockData);

// Same interface whether mock or real
const schedule = await scheduleService.getScheduleForDate(date);
```

This enables rapid development, testing, and demos without external dependencies.

### Multi-Layer Intelligence
The system's strength lies in how these pieces work together:
- **Orchestration Layer**: Intelligent routing based on intent
- **Tool Layer**: Focused, atomic operations
- **Workflow Layer**: Complex multi-step processes
- **RAG Layer**: Continuous personalization

### Pure Data Response Pattern
All operations return pure domain data for clean separation of concerns. The client-side ToolResultRenderer handles all UI decisions based on tool metadata, enabling rich interactive features without coupling AI logic to UI presentation.

## Current Implementation Status

### âœ… What's Built & Working (Epic 4 - Sprint 4.1 Complete)
- **25 Essential Tools**: All CRUD operations consolidated and enhanced
- **UniversalToolResponse**: Standardized response format for UI consistency
- **Service Factory Pattern**: Mock/real data switching
- **Database Schema**: Consolidated tables with pgvector
- **AI Chat Interface**: Streaming responses with tool execution
- **Tool Registry**: Auto-discovery and registration
- **Time Block UI**: Complete with all block types

### ğŸš§ In Active Development (Epic 4 - Sprint 4.2)
- **Orchestration Layer**: Intent classification and routing
- **Multi-step Execution**: Complex operations with progress
- **Context Builder**: RAG integration preparation

### ğŸ“‹ Upcoming Sprints
- **Sprint 4.3**: Domain Workflows (4 LangGraph workflows)
- **Sprint 4.4**: RAG & Learning System
- **Sprint 4.5**: UI Enhancement (Rich components)
- **Sprint 4.6**: Integration & Polish

### ğŸ”® Not Yet Implemented
- Gmail & Calendar API integration
- Voice commands
- Mobile app
- Team features

## The Philosophy (Why We Built It This Way)

**Most productivity apps are procrastination apps in disguise.** They give you infinite ways to organize work instead of doing work.

dayli is different:
- **Shows less, not more** â†’ Only today, only what matters
- **Decides for you** â†’ No analysis paralysis
- **Protects your attention** â†’ Deep work is sacred
- **Learns silently** â†’ No dashboards or analytics

Every technical decision enforces this philosophy:
- Single day view? Can't procrastinate on future planning
- No manual task creation? Forces focus on what exists
- AI-only control? Removes the temptation to fiddle

## Getting Started

```bash
# Clone the repository
git clone https://github.com/yourusername/dayli.git

# Install dependencies
cd dayli
bun install

# Set up environment variables
cp .env.example .env.local
# Add required keys:
# - OPENAI_API_KEY
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY
# - GOOGLE_CLIENT_ID (for Gmail/Calendar)
# - GOOGLE_CLIENT_SECRET

# Run database migrations
cd migrations
bun run db:migrate

# Start development
bun run dev

# In another terminal, start desktop app
cd apps/desktop
bun tauri dev
```

## Example: A Real Day with dayli

**8:45 AM - Open dayli**
```
You: "Plan my day"

AI: "I'll analyze your calendar and emails to create an optimal schedule...

Done! Here's your day:
- 9:00-11:00: Deep work on payment refactor (2 tasks)
- 11:00-11:30: Process 8 urgent emails
- 11:30-12:30: Lunch (protected)
- 1:00-2:00: Team standup (from calendar)
- 2:00-4:00: Deep work continuation
- 4:00-4:30: Quick email replies (12 emails)

I've auto-declined 2 meeting requests during your focus blocks and archived 47 non-important emails."
```

**10:30 AM - Meeting cancelled**
```
You: "My 1pm got cancelled"

AI: "Perfect! You have a 1-hour gap. Based on your energy patterns, I suggest:
- Code review for Jordan's PR (45 min)
- Already assigned to the block. Want to start now or keep your current focus?"
```

**4:00 PM - End of day check**
```
You: "How did I do today?"

AI: "You completed 5 of 6 planned tasks. The API refactor was moved to tomorrow's morning block. All urgent emails were handled. Your focus time was 4.5 hours - above your average. See you tomorrow!"
```

## The Stack

- **Frontend**: Next.js 14 + TypeScript + Tailwind CSS
- **Desktop**: Tauri (10MB native app)
- **AI Architecture**: 
  - **Orchestration Layer**: GPT-4 intent classification & routing
  - **Vercel AI SDK**: Chat interface, streaming, tool execution
  - **LangGraph**: Complex stateful workflows
  - **RAG System**: pgvector for embeddings & learning
- **LLM**: OpenAI GPT-4 Turbo
- **Database**: PostgreSQL with RLS (Supabase)
- **Auth**: Supabase Auth (Google OAuth)
- **APIs**: Gmail API, Google Calendar API (coming soon)
- **Monorepo**: Turborepo for coordinated development

## Why This Architecture Matters

1. **Multi-Layer Intelligence**: Orchestration â†’ Tools/Workflows â†’ UniversalResponse
2. **Continuous Learning**: RAG system improves with every interaction
3. **Type Safety**: TypeScript from database to UI
4. **Scalability**: 25 tools instead of 95, clear separation of concerns
5. **User Experience**: Natural language only, no configuration needed

This isn't over-engineering. Each choice directly supports the goal: help users execute, not manage.

---

**Built for people who want to do deep, meaningful work in a world designed to prevent it.**

Built with TypeScript, powered by AI, designed for focus.

Stop managing. Start doing.