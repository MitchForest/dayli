# dayli

**Stop managing your work. Start doing it.**

## The Truth Nobody Talks About

You don't have a productivity problem. You have a decision fatigue problem.

Every morning, you open your laptop to 15 tabs, 200 emails, and 30 tasks. You spend the first hour "planning your day" - which is really just anxiety-driven task shuffling. By the time you actually start working, your best mental energy is gone.

**The real tragedy?** You know exactly what important work needs doing. But it's buried under a mountain of maybe-important, might-be-urgent, should-probably-check noise.

## What dayli Actually Does

dayli is an AI executive assistant that makes every decision about what you should work on, so you don't have to.

Open dayli and see your day already planned:
- Your 3-7 most important tasks scheduled in time blocks
- Emails analyzed by importance AND urgency
- Focus time protected in your calendar
- Everything orchestrated by AI that learns your patterns

No task lists. No priorities. No badges. Just a clean schedule and a chat interface.

## Who Is This For?

dayli is for knowledge workers who:
- Know the 80/20 principle but struggle to apply it daily
- Want to process emails and meetings efficiently to create time for deep work
- Are tired of productivity theater and want real focus
- Need things to not fall through the cracks
- Value their time and attention above all else

## Real User Stories (How We Actually Help)

### Story 1: "The Morning Paralysis"
**Alex, 28, Senior Software Engineer**

*The Pain:* "I'd open my laptop at 9am and see 47 unread emails, 3 Slack channels on fire, and my task list from yesterday. I'd spend 45 minutes 'organizing' - really just moving anxiety around. By the time I started coding, it was almost 10am and I was already mentally exhausted."

*How dayli Solves It:*
```
Alex at 9am: "Plan my day"

dayli: "I've analyzed your 47 emails. 3 need responses this morning (scheduled 11-11:30am), 
12 are FYIs (archived), and the rest can wait. Your critical API refactor has a 2-hour 
deep work block starting now. Your calendar is blocked, Slack is paused. Just start coding."

Result: Alex starts actual work at 9:02am with zero decisions made.
```

**The Feature Magic:**
- **Adaptive Scheduling**: AI already made all the decisions
- **Email Triage**: 47 emails → 3 actions
- **Protected Focus**: Calendar auto-blocked, no interruptions

### Story 2: "The Context Switching Nightmare"
**Sarah, 34, Product Manager**

*The Pain:* "Every 15 minutes something 'urgent' would pop up. A Slack from engineering, a customer email, a meeting invite. I'd handle each one immediately because I didn't want to drop balls. By 5pm, I'd realize I never worked on the strategy doc that actually mattered."

*How dayli Solves It:*
```
10:30am interrupt: "Sarah, the CEO wants to meet about pricing at 2pm"

dayli: "I see the meeting request. You're currently in deep work on the Q4 strategy 
(1 hour left). I'll accept the meeting but I'm moving your email block to 3:30pm 
and pushing non-urgent items to tomorrow. Keep focusing - I've handled it."

Sarah stays in flow. dayli handles the Tetris.
```

**The Feature Magic:**
- **Intelligent Interruption Handling**: AI decides what's truly urgent
- **Automatic Rescheduling**: Adjusts the day without breaking focus
- **Context Preservation**: Protects current deep work above all

### Story 3: "The Invisible Workload"
**Jordan, 31, Marketing Director**

*The Pain:* "My calendar showed 4 hours of meetings, but I had 6 hours of work. Email responses, campaign reviews, team feedback - all invisible labor that happened in the cracks. I'd work until 8pm daily because I couldn't see the real workload."

*How dayli Solves It:*
```
Jordan: "I feel like I'm drowning but my calendar looks fine"

dayli: "You have 73 unscheduled tasks from emails and Slack. Based on your patterns:
- Campaign review: 45 min (scheduling at 9am)
- 12 quick email replies: 30 min batch (2pm)  
- Team feedback docs: 1 hour (4pm)

I've made all your invisible work visible and scheduled. Your day ends at 5:30pm."
```

**The Feature Magic:**
- **Task Extraction**: Pulls tasks from emails/messages automatically
- **Time Estimation**: Learns how long things actually take you
- **Visible Scheduling**: Nothing happens outside of time blocks

### Story 4: "The Energy Mismatch"
**Maya, 29, Data Scientist**

*The Pain:* "I'd schedule deep analysis for 3pm when my brain was mush, then waste my sharp morning energy on email. I knew my patterns but kept fighting them. By Friday, I'd have accomplished half of what I intended."

*How dayli Solves It:*
```
Maya: "Schedule my model training work"

dayli: "I notice you complete complex work 3x faster before noon. I've scheduled:
- 9-11am: Model training (your peak focus time)
- 11-11:30am: Email batch (lower energy needed)
- 2-3pm: Data cleaning (repetitive, good for afternoon)

This matches your actual energy patterns from the last 30 days."
```

**The Feature Magic:**
- **RAG Learning System**: Tracks when you're actually productive
- **Energy-Aware Scheduling**: Matches work type to energy level
- **Pattern Recognition**: Learns without surveys or manual input

## The dayli Difference

1. **We hide more than we show** - Yesterday's tasks? Gone. Next week? Doesn't exist.
2. **AI has authority** - It decides, you execute (or override when needed)
3. **Constraints drive productivity** - 3-7 tasks isn't a limitation, it's a feature
4. **Natural language is the only interface** - If you need a button, we've failed
5. **Learning without dashboards** - The AI gets smarter, you stay focused

## The Actual UI: Radical Simplicity

```
┌─────────────────────────────────┬──────────────────────┐
│  📅 Today's Schedule            │  💬 AI Assistant     │
│                                 │                      │
│  9:00 ┌─────────────────┐      │  "Plan my day"       │
│       │ Deep Work Block │      │                      │
│       │ Payment Refactor│      │  "I'll analyze your  │
│       │ ✓ Task 1       │      │  calendar and emails,│
│       │ ○ Task 2       │      │  then create an      │
│       └─────────────────┘      │  optimal schedule."  │
│                                 │                      │
│ 11:00 ┌─────────────────┐      │  [AI is thinking...] │
│       │ Email Block     │      │                      │
│       │ 12 to process   │      │  "Done! I've         │
│       └─────────────────┘      │  scheduled 3 focus   │
│                                 │  blocks and batched  │
│ 12:00 ┌─────────────────┐      │  your emails for     │
│       │ Lunch Break     │      │  11am."              │
│       │ Protected       │      │                      │
│       └─────────────────┘      │                      │
└─────────────────────────────────┴──────────────────────┘
```

Two panels. That's it. Schedule on the left, AI chat on the right.

## Core Features (What We Actually Built)

### 🧠 AI-Powered Natural Language Control
Everything happens through chat. No buttons, no menus.
- **"Plan my day"** → AI analyzes everything and creates optimal schedule
- **"Move my meeting to 3pm"** → Done, calendar updated
- **"Process my emails"** → Triaged by importance/urgency, scheduled
- **"What should I work on?"** → Context-aware suggestion based on time/energy

### 📅 Adaptive Scheduling Workflow
Powered by LangGraph, the scheduling system adapts to your current state:
- **Empty schedule?** Full daily planning with optimal distribution
- **Partially filled?** Intelligent gap-filling  
- **Overbooked?** Smart optimization and task deferral
- **Always protected:** Lunch breaks at your preferred time

### 📧 Two-Dimensional Email Triage
Our email workflow analyzes on two axes:

|                | **Urgent** | **Can Wait** | **No Response** |
|----------------|------------|--------------|-----------------|
| **Important**  | Today block | Tomorrow | Archive |
| **Not Important** | Quick batch | Defer | Archive |
| **Archive** | - | - | Auto-archive |

Result: 80% of emails handled without you seeing them.

### 🧠 Multi-Layer RAG Learning System
Every decision is stored and learned from:
- **Pattern Layer**: Long-term behaviors ("always takes lunch at 11:30")
- **Recent Layer**: Last 7 days of decisions
- **Similar Layer**: Past situations with similar context

The AI gets smarter without showing complexity.

### 🔒 Protected Focus Time
When you're in a focus block:
- Google Calendar shows "Deep Work - Busy"
- Meeting invites during this time auto-declined
- Only true emergencies surface

## The Technical Architecture (How We Built This)

### Two-Layer AI System

```
┌─────────────────────────────────────────────────────────┐
│                 Vercel AI SDK Layer                     │
│  • Chat interface & streaming responses                 │
│  • Tool orchestration (maxSteps: 5)                     │
│  • Multi-step operations with progress                  │
│  • Natural language understanding                       │
└──────────────────────┬──────────────────────────────────┘
                       │ Calls tools & workflows
                       ▼
┌─────────────────────────────────────────────────────────┐
│              LangGraph Workflow Layer                   │
│                                                         │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐      │
│  │  Adaptive   │ │   Email     │ │    Task     │      │
│  │ Scheduling  │ │   Triage    │ │Prioritization│     │
│  └─────────────┘ └─────────────┘ └─────────────┘      │
│                                                         │
│  ┌─────────────┐ ┌─────────────┐                       │
│  │  Schedule   │ │   Daily     │                       │
│  │Optimization │ │   Review    │                       │
│  └─────────────┘ └─────────────┘                       │
│                                                         │
│  • Complex state management & routing                   │
│  • Multi-node decision trees                            │
│  • Context-aware strategy selection                     │
│  • Pattern learning & adaptation                        │
└─────────────────────────────────────────────────────────┘
```

**Why this architecture?**
- AI SDK handles the chat UX and tool management
- LangGraph handles complex, stateful workflows
- Clean separation of concerns

### The Tools (What AI Can Do)

```typescript
// Direct action tools (AI SDK)
const tools = {
  createTimeBlock,      // "Schedule deep work at 9am"
  moveTimeBlock,        // "Move my meeting to 3pm"
  deleteTimeBlock,      // "Cancel email time"
  assignTaskToBlock,    // "Add code review to morning"
  completeTask,         // "Mark refactor as done"
  getSchedule,          // "What's my schedule?"
  
  // Complex workflows (LangGraph)
  scheduleDay,          // "Plan my day" → Full workflow
  triageEmails,         // "Process emails" → 2D analysis
  prioritizeTasks,      // "What should I work on?" → Smart task selection
  optimizeSchedule,     // "Optimize my day" → Non-destructive improvements
  dailyReview,          // "How did I do?" → Learn and prepare tomorrow
  updatePreference,     // "I prefer lunch at 11:30"
}
```

### Data Flow

```
User Input → AI SDK → Tool Selection → Execute
                ↓                         ↓
            Streaming              Simple Tool or
            Response              LangGraph Workflow
                                         ↓
                                   Complex Logic
                                   (nodes, edges)
                                         ↓
                                   Database/APIs
```

### The Stack

- **Frontend**: Next.js 14 + TypeScript + Tailwind CSS
- **Desktop**: Tauri (10MB native app)
- **AI Orchestration**: 
  - Vercel AI SDK (chat, streaming, tools)
  - LangGraph (complex workflows)
- **LLM**: OpenAI GPT-4 Turbo
- **Vector DB**: Supabase + pgvector (for RAG)
- **Database**: PostgreSQL with RLS
- **Auth**: Supabase Auth (Google OAuth)
- **APIs**: Gmail API, Google Calendar API
- **Monorepo**: Turborepo for coordinated development

## Design Decisions That Matter

### No Manual Controls
- **No settings page** → AI learns your preferences
- **No task creation** → Tasks come from email/calendar/chat
- **No priority levels** → AI decides based on context
- **No drag-and-drop** → Natural language only

### Time as Primary Dimension
```typescript
interface TimeBlock {
  startTime: Date;
  endTime: Date;
  type: 'focus' | 'email' | 'meeting' | 'break';
  tasks: Task[];  // What to do in this block
}
```
Everything has a "when", not just a "what".

### Enforced Constraints
- **3-7 tasks max** per day (hard limit in code)
- **Today-only view** (no week/month views)
- **Single task visible** during focus
- **Protected lunch** (always scheduled)

### AI as Invisible Intelligence
The AI should feel like a brilliant assistant, not a chatbot:
- Never mentions tool names or technical details
- Explains actions in human terms
- Learns without showing learning
- Adapts without configuration

### Trust Through Transparency
- AI explains its reasoning when asked
- Changes preview before applying
- Undo is always available
- You can ask "why did you do that?"

## Architecture Decisions Worth Noting

### Service Factory Pattern
We built a data-source agnostic architecture that allows seamless switching between mock and real data:

```typescript
const factory = ServiceFactory.getInstance();
factory.configure({ userId, supabaseClient }, useMockData);

// Same interface whether mock or real
const schedule = await scheduleService.getScheduleForDate(date);
```

This enables rapid development, testing, and demos without external dependencies.

### Tool-Based AI Architecture
Instead of hard-coded actions, everything is a tool the AI can use:

```typescript
const tools = {
  createTimeBlock,    // "Schedule a 2-hour focus block at 9am"
  moveTimeBlock,      // "Move my meeting to 3pm"
  deleteTimeBlock,    // "Cancel my afternoon email time"
  assignTaskToBlock,  // "Add budget review to morning focus"
  scheduleDay,        // "Plan my day" (triggers full workflow)
};
```

### Multi-Layer RAG Context
We don't just store data - we store understanding:

1. **Pattern Layer**: Long-term behaviors ("usually takes lunch at 11:30")
2. **Recent Layer**: Last 7 days of decisions  
3. **Similar Layer**: Past situations with similar context

This allows queries like "What should I work on?" to consider your current state, recent patterns, and similar past situations.

## How the Workflows Actually Work

### Adaptive Scheduling (LangGraph)
```typescript
// When user says "Plan my day"
1. fetchData → Get current schedule, tasks, preferences
2. analyzeState → Determine how full the day is
3. determineStrategy → Router node chooses approach:
   - 'full': Empty day needs complete planning
   - 'partial': Fill gaps intelligently  
   - 'optimize': Rearrange existing
   - 'task_only': Just assign tasks to blocks
4. executeStrategy → Create/move blocks
5. protectBreaks → Ensure lunch is protected
6. validateSchedule → No conflicts
7. generateSummary → Human-readable response
```

### Email Triage (LangGraph)
```typescript
// When user says "Process my emails"
1. fetchEmails → Get unread from Gmail API
2. fetchBacklog → Get deferred emails from DB
3. analyzeEmails → LLM categorizes importance
4. detectUrgency → Keyword + sender analysis
5. batchEmails → Group by type:
   - important_urgent → Morning block
   - quick_replies → 15-min batch
   - thoughtful → Afternoon block
6. generateSchedule → Create time blocks
7. updateBacklog → Save "can wait" emails
```

### Task Prioritization (LangGraph)
```typescript
// When user says "What should I work on?"
1. fetchOpenTimeSlot → Find current/next available time
2. fetchTaskBacklog → Get all unassigned tasks
3. analyzeContext → Consider energy levels, time of day
4. scoreTasksByPriority → Importance + urgency + age
5. matchTasksToTime → Fit tasks to available time
6. generateRecommendation → Clear suggestion with reasoning
```

### Schedule Optimization (LangGraph)
```typescript
// When user says "Optimize my day"
1. analyzeCurrentSchedule → Find inefficiencies
2. identifyImprovements → Gaps, back-to-back meetings
3. proposeOptimizations → Non-destructive changes
4. validateConstraints → Respect preferences and commitments
5. presentOptions → Show potential time savings
```

### Daily Review (LangGraph)
```typescript
// End of day automatic or "How did I do?"
1. collectDayMetrics → Tasks completed, time in focus
2. analyzePatterns → What worked, what didn't
3. updateRAGContext → Store learnings
4. reviewBacklog → Re-prioritize for tomorrow
5. prepareTomorrow → Initial schedule suggestion
```

### RAG Learning System
```typescript
// Every user action is learned
await ragService.storeContext({
  type: 'decision',
  content: 'Moved lunch from 12:00 to 11:30',
  embedding: await generateEmbedding(content),
  metadata: { reason: 'Earlier meeting' }
});

// Future decisions use this context
const context = await ragService.getContext(
  userId,
  'schedule lunch',
  { includePatterns: true, includeSimilar: true }
);
// Returns: "User typically prefers lunch at 11:30"
```

## Current Implementation Status

### ✅ What's Built & Working
- Complete time-block UI with all block types
- AI chat with streaming responses (Vercel AI SDK)
- All CRUD tools for schedule manipulation
- Service factory pattern (mock/real data switching)
- Database schema with pgvector for embeddings
- Multi-step AI operations with progress tracking
- Basic mock data for all scenarios

### 🚧 In Active Development (Epic 3)
- **Sprint 03.01**: ✅ Core AI tools implementation
- **Sprint 03.02**: 🚧 Adaptive scheduling workflow (LangGraph)
- **Sprint 03.03**: 📅 Email triage workflow (LangGraph)
- **Sprint 03.04**: 📅 RAG system implementation
- **Sprint 03.05**: 📅 Gmail & Calendar API integration
- **Sprint 03.06**: 📅 Change preview & polish

### 📋 All LangGraph Workflows (5 Total)
1. **Adaptive Scheduling** - Intelligent daily planning
2. **Email Triage** - 2D importance/urgency analysis
3. **Task Prioritization** - Smart task selection based on context
4. **Schedule Optimization** - Non-destructive improvements
5. **Daily Review** - Learning and tomorrow preparation

### 🔮 Not Yet Implemented
- Slack integration
- Voice commands  
- Mobile app
- Team features

## The Philosophy (Why We Built It This Way)

**Most productivity apps are procrastination apps in disguise.** They give you infinite ways to organize work instead of doing work.

dayli is different:
- **Shows less, not more** → Only today, only what matters
- **Decides for you** → No analysis paralysis
- **Protects your attention** → Deep work is sacred
- **Learns silently** → No dashboards or analytics

Every technical decision enforces this philosophy:
- Single day view? Can't procrastinate on future planning
- No manual task creation? Forces focus on what exists
- AI-only control? Removes the temptation to fiddle

## Getting Started

```bash
# Clone the repository
git clone https://github.com/yourusername/dayli.git

# Install dependencies
cd dayli
bun install

# Set up environment variables
cp .env.example .env.local
# Add required keys:
# - OPENAI_API_KEY
# - NEXT_PUBLIC_SUPABASE_URL
# - NEXT_PUBLIC_SUPABASE_ANON_KEY
# - GOOGLE_CLIENT_ID (for Gmail/Calendar)
# - GOOGLE_CLIENT_SECRET

# Run database migrations
cd migrations
bun run db:migrate

# Start development
bun run dev

# In another terminal, start desktop app
cd apps/desktop
bun tauri dev
```

## Example: A Real Day with dayli

**8:45 AM - Open dayli**
```
You: "Plan my day"

AI: "I'll analyze your calendar and emails to create an optimal schedule...

Done! Here's your day:
- 9:00-11:00: Deep work on payment refactor (2 tasks)
- 11:00-11:30: Process 8 urgent emails
- 11:30-12:30: Lunch (protected)
- 1:00-2:00: Team standup (from calendar)
- 2:00-4:00: Deep work continuation
- 4:00-4:30: Quick email replies (12 emails)

I've auto-declined 2 meeting requests during your focus blocks and archived 47 non-important emails."
```

**10:30 AM - Meeting cancelled**
```
You: "My 1pm got cancelled"

AI: "Perfect! You have a 1-hour gap. Based on your energy patterns, I suggest:
- Code review for Jordan's PR (45 min)
- Already assigned to the block. Want to start now or keep your current focus?"
```

**4:00 PM - End of day check**
```
You: "How did I do today?"

AI: "You completed 5 of 6 planned tasks. The API refactor was moved to tomorrow's morning block. All urgent emails were handled. Your focus time was 4.5 hours - above your average. See you tomorrow!"
```

## Why This Architecture Matters

1. **Service Interfaces**: Switch between mock and real data seamlessly
2. **AI SDK + LangGraph**: Best tool for each job
3. **RAG with pgvector**: Learn without external dependencies
4. **TypeScript Everywhere**: Type safety from DB to UI
5. **Tauri Desktop**: Native performance, 10MB installer

This isn't over-engineering. Each choice directly supports the goal: help users execute, not manage.

---

**Built for people who want to do deep, meaningful work in a world designed to prevent it.**

Built with TypeScript, powered by AI, designed for focus.

Stop managing. Start doing. 